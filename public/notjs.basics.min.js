(function(){var a,d,b=[].slice;d="undefined"!==typeof module&&module.exports?global:window;a=function(){function c(){}c.prototype.namespace=function(c,a,f){var e,g,d,j,i;3>arguments.length&&(e=[this].concat(b.call(arguments)),c=e[0],a=e[1],f=e[2]);g=c;i=a.split(".");d=0;for(j=i.length;d<j;d++)e=i[d],c=c[e]||(c[e]={});return f(c,g)};c.prototype.addPrototypeUnlessExists=function(c,a,b){return c.prototype[a]||(c.prototype[a]=b)};return c}();d.Notjs=new a}).call(this);
(function(){Notjs.addPrototypeUnlessExists(Array,"remove",function(a,d){var b;b=this.slice((d||a)+1||this.length);this.length=0>a?this.length+a:a;return this.push.apply(this,b)})}).call(this);
(function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};Notjs.namespace("basics",function(d){return d.Partials=function(){function b(c){null==c&&(c={});this.onPartialsResolved=a(this.onPartialsResolved,this);this.onPartialRendered=a(this.onPartialRendered,this);this.renderPartial=a(this.renderPartial,this);this.fetchExternalPartial=a(this.fetchExternalPartial,this);this.resolveExternal=a(this.resolveExternal,this);this.resolveInPage=a(this.resolveInPage,this);this.resolve=
a(this.resolve,this);this.initialize=a(this.initialize,this);this.options=_.defaults(c,{removePartials:!0,hidePartials:!1,selector:"body",onPartialsResolved:null,onPartialRendered:null});this.inPagePartials={};this.outstandingExternalRequests=0}b.resolve=function(c){null==c&&(c={});return(new this(c)).initialize().resolve()};b.prototype.initialize=function(){var c;this.$el=$(this.options.selector);c=this.$el.find(".not-partial");this.inPagePartials=_.groupBy(c,"id");this.options.removePartials&&c.remove();
this.options.hidePartials&&c.hide();return this};b.prototype.resolve=function(c){var a=this;null==c&&(c={});c=_.defaults(c,{onPartialsResolved:null});this.resolveExternal({onComplete:function(){a.resolveInPage();return a.onPartialsResolved(c.onPartialsResolved)}});return this};b.prototype.resolveInPage=function(){var c,a,b,f,e,d,h;a=this.$el.find('[data-not_partial^="#"]');e=0;for(d=a.length;e<d;e++)c=a[e],c=$(c),b=c.attr("data-not_partial"),f=b.slice(1),(b=null!=(h=this.inPagePartials[f])?h[0]:void 0)?
this.renderPartial(c,$(b).html()):console.error("In page partial not found by id "+f+" for element: ");return this};b.prototype.resolveExternal=function(c){var a,b,d,e,g;null==c&&(c={});c=_.defaults(c,{onComplete:null});this.externalsRes;b=this.$el.find('[data-not_partial*="/"]');if(0>=b.length&&"function"===typeof c.onComplete)c.onComplete();e=0;for(g=b.length;e<g;e++)a=b[e],a=$(a),d=a.attr("data-not_partial"),this.fetchExternalPartial(a,d,c);return this};b.prototype.fetchExternalPartial=function(c,
a,b){var d=this;null==b&&(b={});b=_.defaults(b,{onComplete:null});if(!a.isBlank())return this.outstandingExternalRequests+=1,$.ajax(a,{dataType:"html",complete:function(){if(0>=(d.outstandingExternalRequests-=1))return"function"===typeof b.onComplete?b.onComplete():void 0},success:function(a){return d.renderPartial(c,a)},error:function(c,b,d){return console.log("Notjs.basics.Partial: Failed to fetch external partial at "+a+". "+("error: "+d+". status: "+status))}})};b.prototype.renderPartial=function(c,
a){c.html(a);return this.onPartialRendered(c)};b.prototype.onPartialRendered=function(a){var b;return"function"===typeof(b=this.options).onPartialRendered?b.onPartialRendered(a):void 0};b.prototype.onPartialsResolved=function(a){var b;return("function"===typeof a?a():void 0)||("function"===typeof(b=this.options).onPartialsResolved?b.onPartialsResolved():void 0)};return b}()})}).call(this);
(function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};Notjs.namespace("basics",function(d){return d.Replicator=function(){function b(c,b){this.selector=c;null==b&&(b={});this.replicate=a(this.replicate,this);this.getTemplate=a(this.getTemplate,this);this.initialize=a(this.initialize,this);this.options=_.defaults(b,{data:null})}b.replicate=function(a,d,k){return(new b(a)).initialize().replicate(d,k)};b.prototype.initialize=function(){this.$element=$(this.selector);this.getTemplate();
return this};b.prototype.getTemplate=function(){if(this.$template)return this.$template;this.$template=this.$element.clone();this.$element.html("");return this.$template};b.prototype.replicate=function(a,b){var d,f,e,g,h;this.$element.html("");e=g=0;for(h=a.length;g<h;e=++g)f=a[e],d=this.$template.clone(),(!b||b(d,f,e))&&this.$element.append(d);return this};return b}.call(this)})}).call(this);
(function(){Notjs.addPrototypeUnlessExists(String,"startsWith",function(a){return this.slice(0,a.length)===a});Notjs.addPrototypeUnlessExists(String,"endsWith",function(a){return this.slice(-a.length)===str});Notjs.addPrototypeUnlessExists(String,"isBlank",function(){return""===this.trim()});Notjs.addPrototypeUnlessExists(String,"trim",function(){return this.replace(/^\s+|\s+$/g,"")});Notjs.addPrototypeUnlessExists(String,"elipsize",function(a){return this.length<=a?this:this.slice(0,a-3)+"..."});
Notjs.addPrototypeUnlessExists(String,"decamelize",function(){var a;a=this.replace(/([A-Z])/g," $1");return a.charAt(0).toUpperCase()+a.slice(1)});Notjs.addPrototypeUnlessExists(String,"dropCamelize",function(){var a;a=this.replace(/\s/g,"");return a.charAt(0).toLowerCase()+a.slice(1)})}).call(this);
